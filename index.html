<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>IOFiber - IOFiber</title>
  <meta property="og:title" content="IOFiber" />
  <meta name="twitter:title" content="IOFiber" />
  <meta name="description" content="#include &lt;boost/asio/steady_timer.hpp&gt; #include &lt;trial/iofiber/fiber.hpp&gt; #include &lt;iostream&gt; namespace asio = boost::asio; namespace fib = trial::iofiber; using namespace std; int main() { asio::io_context ioctx; fib::fiber f1{ ioctx, [](fib::fiber::this_fiber this_fiber) { asio::steady_timer timer{this_fiber.get_executor().context()}; cout &lt;&lt; &#34;3...&#34; &lt;&lt; flush; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); cout &lt;&lt; &#34; 2...&#34; &lt;&lt; flush; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); cout &lt;&lt; &#34; 1...&#34; &lt;&lt; endl; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); } }; fib::fiber{ ioctx, [&amp;f1](fib::fiber::this_fiber this_fiber) { f1.join(this_fiber); cout &lt;&lt; &#34;Hello World&#34; &lt;&lt; endl; } }.detach(); ioctx.run(); }   This library is not a competitor to Boost.">
  <meta property="og:description" content="#include &lt;boost/asio/steady_timer.hpp&gt; #include &lt;trial/iofiber/fiber.hpp&gt; #include &lt;iostream&gt; namespace asio = boost::asio; namespace fib = trial::iofiber; using namespace std; int main() { asio::io_context ioctx; fib::fiber f1{ ioctx, [](fib::fiber::this_fiber this_fiber) { asio::steady_timer timer{this_fiber.get_executor().context()}; cout &lt;&lt; &#34;3...&#34; &lt;&lt; flush; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); cout &lt;&lt; &#34; 2...&#34; &lt;&lt; flush; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); cout &lt;&lt; &#34; 1...&#34; &lt;&lt; endl; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); } }; fib::fiber{ ioctx, [&amp;f1](fib::fiber::this_fiber this_fiber) { f1.join(this_fiber); cout &lt;&lt; &#34;Hello World&#34; &lt;&lt; endl; } }.detach(); ioctx.run(); }   This library is not a competitor to Boost.">
  <meta name="twitter:description" content="#include &lt;boost/asio/steady_timer.hpp&gt; #include &lt;trial/iofiber/fiber.hpp&gt; #include &lt;iostream&gt; namespace asio = boost::asio; namespace fib = trial::iofiber; using namespace std; int …"><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "IOFiber",
    
    "url": "https:\/\/vinipsmaker.github.io\/iofiber\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/vinipsmaker.github.io\/iofiber\/"
  
  
  
  
}
</script>

<meta property="og:title" content="IOFiber" />
<meta property="og:description" content="#include &lt;boost/asio/steady_timer.hpp&gt; #include &lt;trial/iofiber/fiber.hpp&gt; #include &lt;iostream&gt; namespace asio = boost::asio; namespace fib = trial::iofiber; using namespace std; int main() { asio::io_context ioctx; fib::fiber f1{ ioctx, [](fib::fiber::this_fiber this_fiber) { asio::steady_timer timer{this_fiber.get_executor().context()}; cout &lt;&lt; &#34;3...&#34; &lt;&lt; flush; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); cout &lt;&lt; &#34; 2...&#34; &lt;&lt; flush; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); cout &lt;&lt; &#34; 1...&#34; &lt;&lt; endl; timer.expires_after(chrono::seconds(1)); timer.async_wait(this_fiber); } }; fib::fiber{ ioctx, [&amp;f1](fib::fiber::this_fiber this_fiber) { f1.join(this_fiber); cout &lt;&lt; &#34;Hello World&#34; &lt;&lt; endl; } }.detach(); ioctx.run(); }   This library is not a competitor to Boost.">
<meta property="og:url" content="https://vinipsmaker.github.io/iofiber/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="IOFiber" />
  <meta name="twitter:title" content="IOFiber" />
  <meta name="twitter:description" content="#include &lt;boost/asio/steady_timer.hpp&gt; #include &lt;trial/iofiber/fiber.hpp&gt; #include &lt;iostream&gt; namespace asio = boost::asio; namespace fib = trial::iofiber; using namespace std; int …">
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://vinipsmaker.github.io/iofiber/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="IOFiber" />

  <meta name="generator" content="Hugo 0.73.0" />
  <link rel="alternate" href="https://vinipsmaker.github.io/iofiber/index.xml" type="application/rss+xml" title="IOFiber">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://vinipsmaker.github.io/iofiber/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://vinipsmaker.github.io/iofiber/css/highlight.min.css" /><link rel="stylesheet" href="https://vinipsmaker.github.io/iofiber/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://vinipsmaker.github.io/iofiber/">IOFiber</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Tutorials(7)" href="/iofiber/tutorial/">Tutorials(7)</a>
            </li>
          
        
          
            <li>
              <a title="Reference(3)" href="/iofiber/ref/">Reference(3)</a>
            </li>
          
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="page-heading">
              
                <h1>IOFiber</h1>
              
              
                <hr class="small">
              
              
                
                  <span class="page-subheading">IOFiber is a fiber library built on top of Boost.Context and Boost.Asio</span>
                
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
  <div role="main" class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        
          <div class="well">
            <div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">#include &lt;boost/asio/steady_timer.hpp&gt;
#include &lt;trial/iofiber/fiber.hpp&gt;
#include &lt;iostream&gt;

namespace asio = boost::asio;
namespace fib = trial::iofiber;
using namespace std;

int main()
{
  asio::io_context ioctx;

  fib::fiber f1{
    ioctx,
    [](fib::fiber::this_fiber this_fiber) {
      asio::steady_timer timer{this_fiber.get_executor().context()};

      cout &lt;&lt; "3..." &lt;&lt; flush;
      timer.expires_after(chrono::seconds(1));
      timer.async_wait(this_fiber);

      cout &lt;&lt; " 2..." &lt;&lt; flush;
      timer.expires_after(chrono::seconds(1));
      timer.async_wait(this_fiber);

      cout &lt;&lt; " 1..." &lt;&lt; endl;
      timer.expires_after(chrono::seconds(1));
      timer.async_wait(this_fiber);
    }
  };

  fib::fiber{
    ioctx,
    [&amp;f1](fib::fiber::this_fiber this_fiber) {
      f1.join(this_fiber);

      cout &lt;&lt; "Hello World" &lt;&lt; endl;
    }
  }.detach();

  ioctx.run();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This library is <em>not</em> a competitor to Boost.Fiber. This library aims to have
tight integration with Boost.Asio execution engine. User-level differences are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Strand-aware primitives. Minimize the need for locks. Group fibers into
strands and treat each group as an actor.</p>
</li>
<li>
<p>Interruption API. IO requests might never complete. Even if they might
eventually complete we want to cancel them immediately to keep the application
responsive. We need an interruption API that takes integration with Boost.Asio
IO objects into account.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Boost.Asio already provides a stackful coroutine completion token. Reasons to
use this library instead are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eventually you&#8217;ll want communication among coroutines and that&#8217;s when you&#8217;ll
want fibers vocabulary.</p>
</li>
<li>
<p>You may be able to work around ASIO&#8217;s <code>yield</code> token by exploiting the token
protocol, but as soon as you try to implement <code>join()</code> or sync primitives that
work across different strands you&#8217;ll have a hard time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>I used the opportunity to build a library with some more goodies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Based on Boost.Context newer APIs. No more deprecation warnings.</p>
</li>
<li>
<p>Associated executor is easy to extract.</p>
</li>
<li>
<p>Keep associated context busy until you call either <code>join()</code> or <code>detach()</code>.</p>
</li>
<li>
<p>Easy API to do spurious yields.</p>
</li>
<li>
<p>Guaranteed post semantics (a.k.a. run-to-completion if you come from a
JavaScript background).</p>
</li>
<li>
<p>Proper support for completion handlers with any number of arguments.</p>
</li>
<li>
<p><code>assert_excl_strand_ref&lt;T&gt;</code> to mark blocks where suspension is forbidden.</p>
</li>
<li>
<p>Fiber local storage.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TODO:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check issues page.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check <a href="tutorial/iofiber/"><code>iofiber(7)</code></a> to get started.</p>
</div>

          </div>
        

        <div class="posts-list">
          
          
        </div>

        
      </div>
    </div>
  </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            0001
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://vinipsmaker.github.io/iofiber/">IOFiber</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.73.0</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://vinipsmaker.github.io/iofiber/js/main.js"></script>
<script src="https://vinipsmaker.github.io/iofiber/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://vinipsmaker.github.io/iofiber/js/load-photoswipe.js"></script>








  </body>
</html>

